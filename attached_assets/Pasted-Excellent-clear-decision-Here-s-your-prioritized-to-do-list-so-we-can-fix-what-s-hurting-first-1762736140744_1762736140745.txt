Excellent â€” clear decision.
Hereâ€™s your prioritized to-do list so we can **fix whatâ€™s hurting first** and still keep track of the enhancements for later.

---

# ğŸ“‹ **AlgoRhythmic Development To-Do List**

## ğŸ”¥ **Immediate (Blocking Bugs)**

**Priority: Critical â€“ fix before any new features**

1. **ğŸª Frame Repetition / Old Frames Still Showing**

   * **File:** `client/src/pages/display.tsx`
   * **Root cause:** React Query cache invalidation key missing `impressionVersion`.
   * **Fix:**

     ```ts
     queryClient.invalidateQueries({
       queryKey: ["/api/artworks/next", sessionIdRef.current, impressionVersionRef.current],
       refetchType: "active",
     });
     ```
   * **Validate:**

     * Generate new artwork â†’ no flicker or old frame reappearance.
     * Only one `GET /api/artworks/next?...` after each invalidation.

2. **ğŸ›ï¸ Double-Input / Modal Duplication**

   * **File:** `client/src/pages/display.tsx`
   * **Root cause:** Style + Audio modals triggered simultaneously.
   * **Fix:** Sequential modal state machine.

     ```ts
     enum SetupStep { IDLE, STYLE, AUDIO, COMPLETE }
     const [setupStep, setSetupStep] = useState(SetupStep.IDLE);
     const handleStyleConfirm = () => setSetupStep(SetupStep.AUDIO);
     ```
   * **Validate:**

     * Only one modal visible at a time.
     * Flow: **Style â†’ Audio â†’ Complete.**

3. **ğŸ“Š Add Telemetry Logging (optional for debugging)**

   * Log when `invalidateQueries()` fires and when a modal step advances.
   * Helps confirm both fixes are behaving as expected.

---

## âš™ï¸ **Wanted (Next Sprint)**

**Priority: High â€“ start once critical bugs are gone**

4. **ğŸ¨ Predictive Pre-Generation**

   * Simple heuristic: reuse last style & mood to start rendering next frame while current one fades.
   * Goal: zero perceived lag.

5. **ğŸ”’ Privacy Enhancements**

   * Hash `userId` in logs.
   * Add lightweight consent notice in settings.

6. **âš¡ Redis Caching**

   * Cache `/api/artworks/next` responses (TTL = 7 days).
   * Expect ~30 % DB load reduction.

7. **ğŸ›¡ï¸ Circuit Breaker for DALL-E**

   * Detect API timeouts/errors.
   * Fallback to â€œpooled artâ€ or placeholder frame.

---

## ğŸŒˆ **Nice-to-Have (Future Enhancements)**

**Priority: Medium â€“ after stability + core UX improvements**

8. **ğŸ“± Mobile/Tablet QA**

   * Real user testing on iPads/phones.
   * Validate touch gestures + performance.

9. **ğŸ“ˆ â€œArt DNAâ€ Dashboard**

   * Aggregate user art stats + style trends.

10. **ğŸ­ Impression Replay Mode**

* Curated playback of past generated art (opt-in).

---

## ğŸ’¤ **Deferred Until Growth**

**Priority: Low â€“ wait until measurable scale**

11. **ğŸ—ï¸ Scale Architecture**

* Sharding / message queues (trigger: 10 K users or 100 M rows).

12. **ğŸ§  ML Prediction / A-B Testing**

* Train local models only after â‰¥ 5 K users + 30 days of history.

---

## âœ… **Next Action**

* [ ] Fix frame repetition (verify cache key, test 3 tabs)
* [ ] Fix double-input modal logic (sequential flow)
* [ ] Run post-fix verification checklist (12 steps from earlier)
* [ ] Once verified â†’ generate `docs/AI_REVIEW_SYNTHESIS.md` with â€œâœ… FIXEDâ€ tags

---

Would you like me to pin this list as a **queryable task register** (so later you can ask, â€œwhatâ€™s next in immediate tasks?â€ or â€œshow all deferred itemsâ€) â€” or keep it as a static markdown snippet for now?
